{
  "spec_id": "TECH_STACK_ADVISOR_V1",
  "version": "1.0.0",
  "canonical_base_url": "https://api.decisionspark.com",
  "safety_preamble": "Keep technical advice objective, neutral, and helpful. Focus on practical trade-offs.",
  "traits": [
    {
      "key": "project_name",
      "question_text": "What's the name of your project?",
      "answer_type": "string",
      "parse_hint": "Extract the project name as a string. If they say 'it's called X' or 'project X', extract X.",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": [],
      "comment": "FREE TEXT INPUT - Demonstrates text input with natural language parsing"
    },
    {
      "key": "project_description",
      "question_text": "Briefly describe what your application will do (1-2 sentences).",
      "answer_type": "string",
      "parse_hint": "Extract the description. Keep it concise. If they ramble, summarize the key points.",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": ["project_name"],
      "comment": "FREE TEXT INPUT - LLM will summarize if needed"
    },
    {
      "key": "team_size",
      "question_text": "How many developers will be working on this project?",
      "answer_type": "integer",
      "parse_hint": "Extract a single integer 1-50. If they say 'just me', return 1. If they say 'small team', return 3.",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": [],
      "bounds": {
        "min": 1,
        "max": 50
      },
      "comment": "INTEGER INPUT - Parser extracts number from text"
    },
    {
      "key": "deployment_target",
      "question_text": "Where do you plan to deploy this application?",
      "answer_type": "enum",
      "parse_hint": "Map answer to: CLOUD, ON_PREMISE, HYBRID, or UNDECIDED",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": [],
      "options": ["CLOUD", "ON_PREMISE", "HYBRID", "UNDECIDED"],
      "comment": "SINGLE-SELECT - Shows enum options for deployment choice"
    },
    {
      "key": "required_features",
      "question_text": "Which features does your application need? (Select all that apply)",
      "answer_type": "enum_list",
      "parse_hint": "Map to list from: AUTHENTICATION, DATABASE, API, REAL_TIME, FILE_STORAGE, CACHING, SEARCH, ANALYTICS, NONE",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": ["deployment_target"],
      "allow_multiple": true,
      "options": ["AUTHENTICATION", "DATABASE", "API", "REAL_TIME", "FILE_STORAGE", "CACHING", "NONE"],
      "comment": "MULTI-SELECT - Multiple feature selection (negative option NONE clears others)"
    },
    {
      "key": "performance_priority",
      "question_text": "How important is performance/scalability for this project?",
      "answer_type": "enum",
      "parse_hint": "Map to: CRITICAL, IMPORTANT, MODERATE, NOT_PRIORITY",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": ["required_features"],
      "options": ["CRITICAL", "IMPORTANT", "MODERATE", "NOT_PRIORITY"],
      "comment": "SINGLE-SELECT - Performance priority selection"
    },
    {
      "key": "preferred_languages",
      "question_text": "Which programming languages is your team comfortable with? (Select all that apply)",
      "answer_type": "enum_list",
      "parse_hint": "Map to list from: CSHARP, JAVASCRIPT, TYPESCRIPT, PYTHON, JAVA, GO, RUST, PHP, RUBY, NONE",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": ["team_size"],
      "allow_multiple": true,
      "options": ["CSHARP", "JAVASCRIPT", "TYPESCRIPT", "PYTHON", "JAVA", "GO", "NONE"],
      "comment": "MULTI-SELECT - Programming language preferences (NONE is negative option)"
    },
    {
      "key": "timeline_constraint",
      "question_text": "What's your timeline to launch an MVP?",
      "answer_type": "enum",
      "parse_hint": "Map to: WEEKS, MONTHS, QUARTER, YEAR, FLEXIBLE",
      "required": true,
      "is_pseudo_trait": false,
      "depends_on": ["team_size"],
      "options": ["WEEKS", "MONTHS", "QUARTER", "YEAR", "FLEXIBLE"],
      "comment": "SINGLE-SELECT - Timeline selection"
    },
    {
      "key": "compliance_requirements",
      "question_text": "Does your application need to comply with specific regulations? (Select all that apply)",
      "answer_type": "enum_list",
      "parse_hint": "Map to list from: HIPAA, GDPR, SOC2, PCI_DSS, FERPA, NONE",
      "required": false,
      "is_pseudo_trait": false,
      "depends_on": ["deployment_target"],
      "allow_multiple": true,
      "options": ["HIPAA", "GDPR", "SOC2", "PCI_DSS", "NONE"],
      "comment": "MULTI-SELECT - Compliance requirements (NONE is negative option)"
    }
  ],
  "derived_traits": [
    {
      "key": "is_solo_developer",
      "expression": "team_size == 1"
    },
    {
      "key": "is_small_team",
      "expression": "team_size >= 2 and team_size <= 5"
    },
    {
      "key": "is_large_team",
      "expression": "team_size > 10"
    },
    {
      "key": "needs_high_performance",
      "expression": "performance_priority in ['CRITICAL', 'IMPORTANT']"
    },
    {
      "key": "needs_compliance",
      "expression": "len(compliance_requirements) > 0 and 'NONE' not in compliance_requirements"
    },
    {
      "key": "feature_count",
      "expression": "len(required_features)"
    },
    {
      "key": "is_cloud_ready",
      "expression": "deployment_target in ['CLOUD', 'HYBRID']"
    }
  ],
  "immediate_select_if": [
    {
      "outcome_id": "SIMPLE_STATIC_SITE",
      "rule": "required_features == ['NONE'] or (feature_count == 0 and deployment_target == 'UNDECIDED')"
    }
  ],
  "outcomes": [
    {
      "outcome_id": "DOTNET_STACK",
      "selection_rules": [
        "CSHARP in preferred_languages",
        "needs_high_performance == true",
        "is_cloud_ready == true"
      ],
      "display_cards": [
        {
          "title": ".NET Stack with C# üöÄ",
          "subtitle": "Enterprise-ready, high-performance",
          "group_id": "tech_recommendation",
          "care_type_message": "Based on your requirements, .NET is an excellent choice.",
          "icon_url": "https://api.decisionspark.com/icons/dotnet.png",
          "body_text": [
            "‚úÖ ASP.NET Core for high-performance APIs",
            "‚úÖ Entity Framework Core for database",
            "‚úÖ Azure cloud integration",
            "‚úÖ Strong typing and excellent tooling"
          ],
          "care_type_details": [
            "Frontend: Blazor or React/Vue with TypeScript",
            "Database: SQL Server or PostgreSQL with EF Core",
            "Caching: Redis or Azure Cache",
            "Authentication: ASP.NET Core Identity + Azure AD",
            "Deployment: Azure App Service or Kubernetes"
          ],
          "rules": [
            "Perfect for teams familiar with C# and Visual Studio",
            "Great Azure integration if using Microsoft cloud",
            "Strong enterprise support and long-term stability"
          ]
        }
      ],
      "care_type_message": ".NET provides the performance and enterprise features you need.",
      "final_result": {
        "resolution_button_label": "See .NET template",
        "resolution_button_url": "https://api.decisionspark.com/templates/dotnet",
        "analytics_resolution_code": "ROUTE_DOTNET"
      }
    },
    {
      "outcome_id": "NODEJS_TYPESCRIPT_STACK",
      "selection_rules": [
        "TYPESCRIPT in preferred_languages or JAVASCRIPT in preferred_languages",
        "is_cloud_ready == true",
        "feature_count >= 3"
      ],
      "display_cards": [
        {
          "title": "Node.js + TypeScript Stack üü¢",
          "subtitle": "Modern, flexible, huge ecosystem",
          "group_id": "tech_recommendation",
          "care_type_message": "Node.js with TypeScript gives you speed and type safety.",
          "icon_url": "https://api.decisionspark.com/icons/nodejs.png",
          "body_text": [
            "‚úÖ Express or Fastify for APIs",
            "‚úÖ TypeScript for type safety",
            "‚úÖ Massive npm ecosystem",
            "‚úÖ Great for real-time features"
          ],
          "care_type_details": [
            "Frontend: Next.js, React, or Vue",
            "Database: PostgreSQL with Prisma or TypeORM",
            "Caching: Redis",
            "Authentication: Passport.js or Auth0",
            "Deployment: AWS, Azure, Vercel, or Netlify"
          ],
          "rules": [
            "Ideal for full-stack JavaScript/TypeScript teams",
            "Excellent for microservices and serverless",
            "Strong community and rapid development"
          ]
        }
      ],
      "care_type_message": "Node.js + TypeScript offers flexibility and a rich ecosystem.",
      "final_result": {
        "resolution_button_label": "See Node.js template",
        "resolution_button_url": "https://api.decisionspark.com/templates/nodejs",
        "analytics_resolution_code": "ROUTE_NODEJS"
      }
    },
    {
      "outcome_id": "PYTHON_STACK",
      "selection_rules": [
        "PYTHON in preferred_languages",
        "DATABASE in required_features or API in required_features"
      ],
      "display_cards": [
        {
          "title": "Python Stack (FastAPI or Django) üêç",
          "subtitle": "Simple, productive, great for data",
          "group_id": "tech_recommendation",
          "care_type_message": "Python offers rapid development and excellent data handling.",
          "icon_url": "https://api.decisionspark.com/icons/python.png",
          "body_text": [
            "‚úÖ FastAPI for high-performance APIs",
            "‚úÖ Django for full-featured web apps",
            "‚úÖ Great for data science and ML integration",
            "‚úÖ Simple, readable syntax"
          ],
          "care_type_details": [
            "Frontend: React/Vue or Django templates",
            "Database: PostgreSQL with SQLAlchemy or Django ORM",
            "Caching: Redis",
            "Authentication: Django Auth or OAuth2",
            "Deployment: AWS, Azure, or Heroku"
          ],
          "rules": [
            "Perfect for teams who value developer productivity",
            "Excellent if you need data processing or ML",
            "Strong scientific and academic community"
          ]
        }
      ],
      "care_type_message": "Python provides rapid development with powerful libraries.",
      "final_result": {
        "resolution_button_label": "See Python template",
        "resolution_button_url": "https://api.decisionspark.com/templates/python",
        "analytics_resolution_code": "ROUTE_PYTHON"
      }
    },
    {
      "outcome_id": "GO_MICROSERVICES",
      "selection_rules": [
        "GO in preferred_languages",
        "needs_high_performance == true",
        "is_large_team == true or deployment_target == 'CLOUD'"
      ],
      "display_cards": [
        {
          "title": "Go Microservices Stack üî∑",
          "subtitle": "Fast, simple, cloud-native",
          "group_id": "tech_recommendation",
          "care_type_message": "Go is perfect for high-performance microservices.",
          "icon_url": "https://api.decisionspark.com/icons/golang.png",
          "body_text": [
            "‚úÖ Blazing fast performance",
            "‚úÖ Simple concurrency with goroutines",
            "‚úÖ Small binaries, easy deployment",
            "‚úÖ Built for cloud and Kubernetes"
          ],
          "care_type_details": [
            "Frontend: React/Vue separate deployment",
            "Database: PostgreSQL with GORM or sqlx",
            "Caching: Redis",
            "Authentication: JWT or OAuth2",
            "Deployment: Kubernetes, AWS ECS, or Google Cloud Run"
          ],
          "rules": [
            "Best for microservices architecture",
            "Excellent for high-throughput systems",
            "Shorter learning curve than Java"
          ]
        }
      ],
      "care_type_message": "Go delivers excellent performance for cloud-native applications.",
      "final_result": {
        "resolution_button_label": "See Go template",
        "resolution_button_url": "https://api.decisionspark.com/templates/golang",
        "analytics_resolution_code": "ROUTE_GO"
      }
    },
    {
      "outcome_id": "JAVA_SPRING_STACK",
      "selection_rules": [
        "JAVA in preferred_languages",
        "is_large_team == true",
        "needs_compliance == true or needs_high_performance == true"
      ],
      "display_cards": [
        {
          "title": "Java Spring Boot Stack ‚òï",
          "subtitle": "Enterprise-grade, battle-tested",
          "group_id": "tech_recommendation",
          "care_type_message": "Java Spring Boot is the gold standard for enterprise applications.",
          "icon_url": "https://api.decisionspark.com/icons/java.png",
          "body_text": [
            "‚úÖ Spring Boot for rapid development",
            "‚úÖ Mature ecosystem and libraries",
            "‚úÖ Excellent enterprise support",
            "‚úÖ Strong security and compliance tools"
          ],
          "care_type_details": [
            "Frontend: React/Angular or Thymeleaf",
            "Database: PostgreSQL or Oracle with JPA/Hibernate",
            "Caching: Redis or Hazelcast",
            "Authentication: Spring Security + OAuth2",
            "Deployment: AWS, Azure, or on-premise with Docker/Kubernetes"
          ],
          "rules": [
            "Best for large enterprises and regulated industries",
            "Huge talent pool and long-term support",
            "Excellent for complex business logic"
          ]
        }
      ],
      "care_type_message": "Java Spring Boot provides enterprise reliability and compliance.",
      "final_result": {
        "resolution_button_label": "See Java template",
        "resolution_button_url": "https://api.decisionspark.com/templates/java",
        "analytics_resolution_code": "ROUTE_JAVA"
      }
    },
    {
      "outcome_id": "SIMPLE_STATIC_SITE",
      "selection_rules": [
        "required_features == ['NONE'] or feature_count == 0"
      ],
      "display_cards": [
        {
          "title": "Static Site Generator üìÑ",
          "subtitle": "Fast, simple, no backend needed",
          "group_id": "tech_recommendation",
          "care_type_message": "For a simple project, a static site is the fastest path.",
          "icon_url": "https://api.decisionspark.com/icons/static.png",
          "body_text": [
            "‚úÖ No server or database needed",
            "‚úÖ Lightning fast performance",
            "‚úÖ Free or cheap hosting",
            "‚úÖ Easy to maintain"
          ],
          "care_type_details": [
            "Tools: Next.js (static export), Hugo, Jekyll, or Astro",
            "Hosting: Vercel, Netlify, GitHub Pages, or Cloudflare Pages",
            "Content: Markdown files or headless CMS",
            "Forms: Netlify Forms or third-party services"
          ],
          "rules": [
            "Perfect for blogs, documentation, portfolios",
            "Add backend features later if needed",
            "Extremely cost-effective"
          ]
        }
      ],
      "care_type_message": "A static site is the simplest solution for your needs.",
      "final_result": {
        "resolution_button_label": "See static site options",
        "resolution_button_url": "https://api.decisionspark.com/templates/static",
        "analytics_resolution_code": "ROUTE_STATIC"
      }
    }
  ],
  "tie_strategy": {
    "mode": "LLM_CLARIFIER",
    "clarifier_max_attempts": 3,
    "pseudo_traits": [
      {
        "key": "preference_ecosystem",
        "question_text": "Which ecosystem appeals more to you: Microsoft (.NET/Azure) or Open Source (Node/Python/Go)?",
        "answer_type": "enum",
        "parse_hint": "Map to MICROSOFT, OPEN_SOURCE, or NO_PREFERENCE",
        "required": false,
        "is_pseudo_trait": true,
        "options": ["MICROSOFT", "OPEN_SOURCE", "NO_PREFERENCE"],
        "mapping": {
          "DOTNET_STACK": ["MICROSOFT"],
          "NODEJS_TYPESCRIPT_STACK": ["OPEN_SOURCE"],
          "PYTHON_STACK": ["OPEN_SOURCE"],
          "GO_MICROSERVICES": ["OPEN_SOURCE"],
          "JAVA_SPRING_STACK": ["MICROSOFT", "OPEN_SOURCE"]
        }
      }
    ],
    "llm_prompt_template": "Given these technology stacks: {{summaries}}. Ask ONE clarifying question to help choose between them based on the team's preferences or project constraints."
  },
  "disambiguation": {
    "fallback_trait_order": [
      "preferred_languages",
      "performance_priority",
      "deployment_target",
      "team_size"
    ]
  }
}
